<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Realizar los horarios de Reserva</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </h:head>
    <h:body>
        <h:form id="reserva">
            <p:layout style="width: 1780px;height:1000px;">
                <p:layoutUnit id="Center" position="center" resizable = "true" size="500" minSize="40" maxSize="500">
                    <p:layout style="height:500px;">
                        <!-- Panel de Reserva -->
                        <p:layoutUnit id="CenterWest" header="Semana Universitaria" position="west" resizable = "true" 
                                      size="300" minSize="40" maxSize="300" style="text-align: center;">
                            <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                <p:outputLabel for="sem" value="Semanas universitarias:" />
                                <p:selectOneMenu id="sem" value="#{beanReserva.semana}" >
                                    <f:selectItem itemLabel="1" itemValue="1" />
                                    <f:selectItem itemLabel="2" itemValue="2" />
                                    <f:selectItem itemLabel="3" itemValue="3" />
                                    <f:selectItem itemLabel="4" itemValue="4" />
                                    <f:selectItem itemLabel="5" itemValue="5" />
                                    <f:selectItem itemLabel="6" itemValue="6" />
                                    <f:selectItem itemLabel="7" itemValue="7" />
                                    <f:selectItem itemLabel="8" itemValue="8" />
                                    <f:selectItem itemLabel="9" itemValue="9" />
                                    <f:selectItem itemLabel="10" itemValue="10" />
                                    <f:selectItem itemLabel="11" itemValue="11" />
                                    <f:selectItem itemLabel="12" itemValue="12" />
                                    <f:selectItem itemLabel="13" itemValue="13" />
                                    <f:selectItem itemLabel="14" itemValue="14" />
                                    <f:selectItem itemLabel="15" itemValue="15" />
                                    <f:selectItem itemLabel="16" itemValue="16" />
                                </p:selectOneMenu>
                            </h:panelGrid>

                            <p:commandButton value="Consultar Semana" actionListener="#{beanReserva.setSemana(sem)}" 
                                             styleClass="ui-priority-primary" update="reserva" />

                        </p:layoutUnit>

                        <!-- Selección del laboratorio deseado y su información -->
                        <p:layoutUnit id="CenterCenter" header="Información sobre los laboratorios" position="center" resizable = "true" 
                                      size="300" minSize="40" maxSize="300" style="text-align: center;">
                            <p:ring id="basic" value="#{beanReserva.laboratorios}" var="lab">
                                <p:outputPanel style="text-align: center;" layout="block">
                                    #{lab.nombreLab}
                                    <br />
                                    <p:commandButton update=":reserva" icon="ui-icon-search" title="View" oncomplete="PF('LabsInfo').show();">
                                        <f:setPropertyActionListener value="#{lab}" target="#{beanReserva.laboratorio}" />
                                    </p:commandButton>
                                </p:outputPanel>
                            </p:ring>                 
                        </p:layoutUnit>
                        
                        <p:layoutUnit id="CenterSouth" header="Reserva" position="south" resizable = "true" size="250" minSize="40" maxSize="250" >
                            <p:column>
                                <p:outputLabel value="Semana: "/>
                                <h:outputText value="#{beanReserva.semana}" />
                            </p:column>
                            <p:column>
                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                    <p:outputLabel for="day" value="Dia: " />
                                    <p:selectOneMenu id="day" value="#{beanReserva.dia}" >
                                        <f:selectItem itemLabel="Lunes" itemValue="1" />
                                        <f:selectItem itemLabel="Martes" itemValue="2" />
                                        <f:selectItem itemLabel="Miercoles" itemValue="3" />
                                        <f:selectItem itemLabel="Jueves" itemValue="4" />
                                        <f:selectItem itemLabel="Viernes" itemValue="5" />
                                        <f:selectItem itemLabel="Sabado" itemValue="6" />
                                    </p:selectOneMenu>
                                </h:panelGrid>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="  Laboratorio: "/>
                                <h:outputText value="#{beanReserva.laboratorio.nombreLab}" />
                            </p:column>
                            <br></br>
                            <p:column>
                                <p:outputLabel value="  Computadores: "/>
                                <h:outputText value="#{beanReserva.laboratorio.numerocomputadores}" />
                            </p:column>
                            <br></br>
                            <p:column>
                                <p:outputLabel value="  Bloques: " />
                                <p:selectManyCheckbox id="grid" value="#{beanReserva.selectedBloques}" layout="grid" columns="4">
                                        <f:selectItems value="#{beanReserva.bloques}" var="bloque" itemLabel="#{bloque}" itemValue="#{bloque}" />
                                </p:selectManyCheckbox>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="  Repetir reserva: " />
                                <p:selectBooleanCheckbox id="gridRepetir" value="#{beanReserva.repetir}"></p:selectBooleanCheckbox>
                            </p:column>
                            <br></br>
                            <p:commandButton value="Submit" update="reserva" oncomplete="PF('dlg').show()" 
                                             icon="ui-icon-check" actionListener="#{beanReserva.makeReserva}"/>
                        </p:layoutUnit>
                    </p:layout>
                </p:layoutUnit>

                <!--Tabla con reservas con información-->
                <p:layoutUnit id="South" header="Horarios Disponibles" position="south" resizable = "true" size="500" minSize="40" maxSize="500" style="text-align: center;">                    
                    <p:column headerText="Bloques">
                        <p:dataTable id="bloques" var="labs" value="#{beanReserva.horario}">
                            <p:column headerText="Bloques" style="width:100px;height:20px;">
                                <p:dataTable id="Bloques" var="labs2" value="#{labs.get(0)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Laboratorios" style="width:150px;height:20px;text-align: center;">
                                <p:dataTable id="Laboratorios" var="labs2" value="#{labs.get(1)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Lunes" style="width:100px;height:20px;text-align: center;">
                                <p:dataTable id="Lunes" var="labs2" value="#{labs.get(2)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Martes" style="width:100px;height:20px;text-align: center;">
                                <p:dataTable id="Martes" var="labs2" value="#{labs.get(3)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Miercoles" style="width:100px;height:20px;text-align: center;">
                                <p:dataTable id="Miercoles" var="labs2" value="#{labs.get(4)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Jueves" style="width:100px;height:20px;text-align: center;">
                                <p:dataTable id="Jueves" var="labs2" value="#{labs.get(5)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Viernes" style="width:100px;height:20px;text-align: center;">
                                <p:dataTable id="Viernes" var="labs2" value="#{labs.get(6)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                            <p:column headerText="Sabado" style="width:100px;height:20px;text-align: center;">
                                <p:dataTable id="Sabado" var="labs2" value="#{labs.get(7)}">
                                    <p:column>
                                        <h:outputText value="#{labs2}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                        </p:dataTable>
                    </p:column>
                </p:layoutUnit>
            </p:layout>
            
            <!-- Informacion de los laboratorios(Ring) -->
            <p:dialog header="Informacion de Laboratorio Elegido" widgetVar="LabsInfo" modal="true" showEffect="fade" hideEffect="fade" resizable="true" width = "500">
                <p:outputPanel id="infoLabs" style="text-align:center;" layout="block">
                    <p:panelGrid  columns="2" rendered="#{not empty beanReserva.laboratorio}" columnClasses="label,value">
                        <f:facet name="header">
                            <p:graphicImage library="images" name="Laboratorio de Software-big.jpg" width="350" height="250"/> 
                        </f:facet>

                        <h:outputText value="Nombre de Laboratorio:" />
                        <h:outputText value="#{beanReserva.laboratorio.nombreLab}" />

                        <h:outputText value="Número de computadores" />
                        <h:outputText value="#{beanReserva.laboratorio.numerocomputadores}" />

                        <h:outputText value="Encargado de la sala:" />
                        <h:outputText value="#{beanReserva.laboratorio.encargado}" />

                        <h:outputText value="Programas en la sala: " />
                        <p:dataTable id="sof" var="sof" value="#{beanReserva.laboratorio.labsoftware}">
                            <p:column>
                                <h:outputText value="#{sof.nombre}" />
                            </p:column>
                        </p:dataTable>
                    </p:panelGrid>
                </p:outputPanel>
            </p:dialog> 
                        
            <p:dialog header="Su Reserva es" widgetVar="dlg" modal="true" showEffect="fade" hideEffect="fade" resizable="true" width = "500">
                <p:outputPanel id="dlg" style="text-align:center;">
                    YAAAAA :D!!!
                </p:outputPanel>
            </p:dialog> 
        </h:form>
    </h:body>
</html>